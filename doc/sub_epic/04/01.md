# Epic4-å­ä»»åŠ¡01: æ¸¸æˆçŠ¶æ€ç®¡ç†

## å¼€å‘çŠ¶æ€
å·²æµ‹è¯• â†’ å­ä»»åŠ¡å¼€å‘å®Œæˆ

## å¼€å‘æ–¹æ¡ˆ

### 1. å¼€å‘ç›®æ ‡
å®ç°ç»Ÿä¸€çš„æ¸¸æˆçŠ¶æ€ç®¡ç†æ¶æ„ï¼Œæ”¯æŒ7å¤©çº¿æ€§è§£é”æœºåˆ¶å’Œæ¸¸æˆæµç¨‹æ§åˆ¶ï¼Œç¡®ä¿çŠ¶æ€å˜æ›´çš„å¯é¢„æµ‹æ€§å’Œå¯è¿½è¸ªæ€§ã€‚

### 2. è®¾è®¡æ–¹æ¡ˆ
é‡‡ç”¨åˆ†å±‚æ¶æ„è®¾è®¡ï¼š
- **çŠ¶æ€å±‚**ï¼šå®šä¹‰å®Œæ•´çš„çŠ¶æ€ç»“æ„å’Œç±»å‹å®‰å…¨
- **é€»è¾‘å±‚**ï¼šå®ç°ä¸å¯å˜çš„çŠ¶æ€æ›´æ–°é€»è¾‘
- **æ¥å£å±‚**ï¼šæä¾›æ¸…æ™°çš„Actionså’ŒSelectors
- **é›†æˆå±‚**ï¼šä¸å­˜å‚¨ç³»ç»Ÿå’Œæ¸¸æˆå¼•æ“æ— ç¼é›†æˆ

### 3. å®ç°æ–¹å¼

#### 3.1 çŠ¶æ€ç»“æ„å®šä¹‰
```typescript
// src/types/gameState.ts
import { Profession, GameState as BaseGameState, RulePaper, ClearRule } from './game';

// æ‰©å±•åŸºç¡€æ¸¸æˆçŠ¶æ€
export interface GameState extends BaseGameState {
  // ç©å®¶åŸºç¡€ä¿¡æ¯
  playerName: string;
  selectedProvince: string;
  selectedProfession: Profession;
  
  // æ¸¸æˆè¿›åº¦çŠ¶æ€
  currentDay: number; // 0-7ï¼Œ0è¡¨ç¤ºday0ï¼ˆåºç« ï¼‰
  currentNode: string;
  completedDays: Set<number>;
  availableDays: Set<number>;
  
  // æ¸¸æˆæµç¨‹çŠ¶æ€
  gameStatus: GameStatus;
  choiceHistory: ChoiceRecord[];
  storyProgress: StoryProgress;
  
  // ç³»ç»ŸçŠ¶æ€
  isLoading: boolean;
  lastSaveTime: number | null;
  sessionStartTime: number;
  
  // UIçŠ¶æ€
  activeModals: Set<ModalType>;
  notifications: Notification[];
}

export type GameStatus = 
  | 'menu'           // ä¸»èœå•
  | 'character-creation' // è§’è‰²åˆ›å»º
  | 'playing'        // æ¸¸æˆä¸­
  | 'paused'         // æš‚åœ
  | 'completed'      // é€šå…³
  | 'failed'         // å¤±è´¥
  | 'saving'         // ä¿å­˜ä¸­
  | 'loading';       // åŠ è½½ä¸­

export interface ChoiceRecord {
  id: string;
  day: number;
  node: string;
  choiceText: string;
  timestamp: number;
  effects: ChoiceEffect[];
}

export interface ChoiceEffect {
  type: 'attribute' | 'item' | 'flag' | 'story';
  target: string;
  value: any;
  operation: 'set' | 'add' | 'multiply' | 'toggle';
}

export interface StoryProgress {
  visitedNodes: Set<string>;
  completedNodes: Set<string>;
  currentPath: string[];
  branchFlags: Map<string, boolean>;
  storyVariables: Map<string, any>;
}

export type ModalType = 
  | 'settings'
  | 'save-load'
  | 'character-info'
  | 'rules'
  | 'help'
  | 'confirmation';

export interface Notification {
  id: string;
  type: 'info' | 'warning' | 'error' | 'success';
  title: string;
  message: string;
  timestamp: number;
  duration: number;
  persistent: boolean;
}
```

#### 3.2 Actionç±»å‹å®šä¹‰
```typescript
// src/types/gameActions.ts
export type GameAction = 
  // ç©å®¶ä¿¡æ¯ç›¸å…³
  | { type: 'SET_PLAYER_INFO'; payload: PlayerInfo }
  | { type: 'SET_PLAYER_NAME'; payload: string }
  | { type: 'SET_PROFESSION'; payload: Profession }
  | { type: 'SET_PROVINCE'; payload: string }
  
  // æ¸¸æˆè¿›åº¦ç›¸å…³
  | { type: 'ADVANCE_NODE'; payload: NodeAdvance }
  | { type: 'COMPLETE_DAY'; payload: DayCompletion }
  | { type: 'UNLOCK_DAY'; payload: number }
  | { type: 'SET_CURRENT_DAY'; payload: number }
  | { type: 'SET_GAME_STATUS'; payload: GameStatus }
  
  // é€‰æ‹©ç›¸å…³
  | { type: 'RECORD_CHOICE'; payload: ChoiceRecord }
  | { type: 'UNDO_LAST_CHOICE' }
  | { type: 'CLEAR_CHOICE_HISTORY' }
  
  // å±æ€§ç›¸å…³
  | { type: 'UPDATE_ATTRIBUTE'; payload: AttributeUpdate }
  | { type: 'SET_ATTRIBUTE'; payload: AttributeSet }
  | { type: 'RESET_ATTRIBUTES' }
  
  // è§„åˆ™ç›¸å…³
  | { type: 'MARK_RULE'; payload: RuleMark }
  | { type: 'ADD_RULE_PAPER'; payload: RulePaper }
  | { type: 'UPDATE_CLEAR_RULE'; payload: ClearRuleUpdate }
  
  // æ•…äº‹è¿›åº¦ç›¸å…³
  | { type: 'VISIT_NODE'; payload: string }
  | { type: 'COMPLETE_NODE'; payload: string }
  | { type: 'SET_STORY_VARIABLE'; payload: StoryVariable }
  | { type: 'SET_BRANCH_FLAG'; payload: BranchFlag }
  
  // UIç›¸å…³
  | { type: 'SHOW_MODAL'; payload: ModalType }
  | { type: 'HIDE_MODAL'; payload: ModalType }
  | { type: 'ADD_NOTIFICATION'; payload: Notification }
  | { type: 'REMOVE_NOTIFICATION'; payload: string }
  | { type: 'CLEAR_NOTIFICATIONS' }
  
  // ç³»ç»Ÿç›¸å…³
  | { type: 'SET_LOADING'; payload: boolean }
  | { type: 'SET_LAST_SAVE_TIME'; payload: number }
  
  // å­˜æ¡£ç›¸å…³
  | { type: 'LOAD_SAVE'; payload: SaveData }
  | { type: 'CREATE_NEW_GAME' }
  | { type: 'RESET_GAME' }
  
  // æ—¶é—´ç›¸å…³
  | { type: 'ADVANCE_TIME'; payload: number }
  | { type: 'SET_TIME'; payload: number };

export interface PlayerInfo {
  name: string;
  profession: Profession;
  province: string;
}

export interface NodeAdvance {
  nodeId: string;
  day: number;
  storyText?: string;
  availableChoices?: string[];
  conditions?: string[];
}

export interface DayCompletion {
  day: number;
  success: boolean;
  endingType?: 'S' | 'A' | 'B' | 'C' | 'death';
  summary?: string;
  unlockNextDay?: boolean;
}

export interface AttributeUpdate {
  attribute: keyof BaseGameState;
  value: number;
  operation?: 'add' | 'set' | 'multiply';
}

export interface AttributeSet {
  attributes: Partial<BaseGameState>;
  reason?: string;
}

export interface RuleMark {
  ruleId: string;
  paperId: string;
  mark: 'true' | 'false' | 'unknown';
  confidence: number;
}

export interface ClearRuleUpdate {
  ruleId: string;
  completed: boolean;
  progress: number;
}

export interface StoryVariable {
  key: string;
  value: any;
}

export interface BranchFlag {
  flag: string;
  value: boolean;
}
```

#### 3.3 Reducerå®ç°
```typescript
// src/utils/gameReducer.ts
import { GameState, GameAction, GameStatus, StoryProgress } from '../types/gameState';
import { GameSaveData } from '../types/storage';

export const initialGameState: GameState = {
  // åŸºç¡€å±æ€§
  time: 0,
  profession: 'å­¦ç”Ÿ',
  hunger: 50,
  energy: 100,
  sanity: 100,
  intelligence: 50,
  strength: 50,
  speed: 50,
  luck: 50,
  
  // ç©å®¶ä¿¡æ¯
  playerName: '',
  selectedProvince: '',
  selectedProfession: 'å­¦ç”Ÿ',
  
  // æ¸¸æˆè¿›åº¦
  currentDay: 0,
  currentNode: 'start',
  completedDays: new Set(),
  availableDays: new Set([0]),
  
  // æ¸¸æˆçŠ¶æ€
  gameStatus: 'menu',
  choiceHistory: [],
  storyProgress: {
    visitedNodes: new Set(),
    completedNodes: new Set(),
    currentPath: [],
    branchFlags: new Map(),
    storyVariables: new Map()
  },
  
  // ç³»ç»ŸçŠ¶æ€
  isLoading: false,
  lastSaveTime: null,
  sessionStartTime: Date.now(),
  
  // UIçŠ¶æ€
  activeModals: new Set(),
  notifications: []
};

export function gameReducer(state: GameState, action: GameAction): GameState {
  switch (action.type) {
    // ç©å®¶ä¿¡æ¯ç›¸å…³
    case 'SET_PLAYER_INFO':
      return {
        ...state,
        playerName: action.payload.name,
        selectedProfession: action.payload.profession,
        selectedProvince: action.payload.province,
        profession: action.payload.profession
      };

    case 'SET_PLAYER_NAME':
      return {
        ...state,
        playerName: action.payload
      };

    case 'SET_PROFESSION':
      return {
        ...state,
        selectedProfession: action.payload,
        profession: action.payload
      };

    case 'SET_PROVINCE':
      return {
        ...state,
        selectedProvince: action.payload
      };

    // æ¸¸æˆè¿›åº¦ç›¸å…³
    case 'ADVANCE_NODE':
      return handleNodeAdvance(state, action.payload);

    case 'COMPLETE_DAY':
      return handleDayCompletion(state, action.payload);

    case 'UNLOCK_DAY':
      return {
        ...state,
        availableDays: new Set([...state.availableDays, action.payload])
      };

    case 'SET_CURRENT_DAY':
      return {
        ...state,
        currentDay: action.payload,
        currentNode: 'start'
      };

    case 'SET_GAME_STATUS':
      return {
        ...state,
        gameStatus: action.payload
      };

    // é€‰æ‹©ç›¸å…³
    case 'RECORD_CHOICE':
      return {
        ...state,
        choiceHistory: [...state.choiceHistory, action.payload]
      };

    case 'UNDO_LAST_CHOICE':
      if (state.choiceHistory.length === 0) return state;
      return {
        ...state,
        choiceHistory: state.choiceHistory.slice(0, -1)
      };

    case 'CLEAR_CHOICE_HISTORY':
      return {
        ...state,
        choiceHistory: []
      };

    // å±æ€§ç›¸å…³
    case 'UPDATE_ATTRIBUTE':
      return handleAttributeUpdate(state, action.payload);

    case 'SET_ATTRIBUTE':
      return {
        ...state,
        ...action.payload.attributes
      };

    case 'RESET_ATTRIBUTES':
      return {
        ...state,
        time: 0,
        hunger: 50,
        energy: 100,
        sanity: 100,
        intelligence: 50,
        strength: 50,
        speed: 50,
        luck: 50
      };

    // æ•…äº‹è¿›åº¦ç›¸å…³
    case 'VISIT_NODE':
      return {
        ...state,
        storyProgress: {
          ...state.storyProgress,
          visitedNodes: new Set([...state.storyProgress.visitedNodes, action.payload]),
          currentPath: [...state.storyProgress.currentPath, action.payload]
        }
      };

    case 'COMPLETE_NODE':
      return {
        ...state,
        storyProgress: {
          ...state.storyProgress,
          completedNodes: new Set([...state.storyProgress.completedNodes, action.payload])
        }
      };

    case 'SET_STORY_VARIABLE':
      return {
        ...state,
        storyProgress: {
          ...state.storyProgress,
          storyVariables: new Map([
            ...state.storyProgress.storyVariables,
            [action.payload.key, action.payload.value]
          ])
        }
      };

    case 'SET_BRANCH_FLAG':
      return {
        ...state,
        storyProgress: {
          ...state.storyProgress,
          branchFlags: new Map([
            ...state.storyProgress.branchFlags,
            [action.payload.flag, action.payload.value]
          ])
        }
      };

    // UIç›¸å…³
    case 'SHOW_MODAL':
      return {
        ...state,
        activeModals: new Set([...state.activeModals, action.payload])
      };

    case 'HIDE_MODAL':
      return {
        ...state,
        activeModals: new Set([...state.activeModals].filter(modal => modal !== action.payload))
      };

    case 'ADD_NOTIFICATION':
      return {
        ...state,
        notifications: [...state.notifications, action.payload]
      };

    case 'REMOVE_NOTIFICATION':
      return {
        ...state,
        notifications: state.notifications.filter(n => n.id !== action.payload)
      };

    case 'CLEAR_NOTIFICATIONS':
      return {
        ...state,
        notifications: []
      };

    // ç³»ç»Ÿç›¸å…³
    case 'SET_LOADING':
      return {
        ...state,
        isLoading: action.payload
      };

    case 'SET_LAST_SAVE_TIME':
      return {
        ...state,
        lastSaveTime: action.payload
      };

    // å­˜æ¡£ç›¸å…³
    case 'LOAD_SAVE':
      return loadSaveData(action.payload);

    case 'CREATE_NEW_GAME':
      return {
        ...initialGameState,
        sessionStartTime: Date.now(),
        gameStatus: 'character-creation'
      };

    case 'RESET_GAME':
      return initialGameState;

    // æ—¶é—´ç›¸å…³
    case 'ADVANCE_TIME':
      return {
        ...state,
        time: state.time + action.payload
      };

    case 'SET_TIME':
      return {
        ...state,
        time: action.payload
      };

    default:
      return state;
  }
}

// è¾…åŠ©å‡½æ•°
function handleNodeAdvance(state: GameState, payload: NodeAdvance): GameState {
  const newState = {
    ...state,
    currentNode: payload.nodeId,
    storyProgress: {
      ...state.storyProgress,
      visitedNodes: new Set([...state.storyProgress.visitedNodes, payload.nodeId]),
      currentPath: [...state.storyProgress.currentPath, payload.nodeId]
    }
  };

  // å¦‚æœè·¨å¤©ï¼Œæ›´æ–°å¤©æ•°
  if (payload.day !== state.currentDay) {
    newState.currentDay = payload.day;
  }

  return newState;
}

function handleDayCompletion(state: GameState, payload: DayCompletion): GameState {
  const newCompletedDays = new Set([...state.completedDays, payload.day]);
  const newAvailableDays = new Set(state.availableDays);
  
  // è§£é”ä¸‹ä¸€å¤©
  if (payload.unlockNextDay && payload.day < 7) {
    newAvailableDays.add(payload.day + 1);
  }

  let newGameStatus = state.gameStatus;
  if (payload.success && payload.day === 7) {
    newGameStatus = 'completed';
  } else if (!payload.success && payload.endingType === 'death') {
    newGameStatus = 'failed';
  }

  return {
    ...state,
    completedDays: newCompletedDays,
    availableDays: newAvailableDays,
    gameStatus: newGameStatus
  };
}

function handleAttributeUpdate(state: GameState, payload: AttributeUpdate): GameState {
  const { attribute, value, operation = 'add' } = payload;
  const currentValue = state[attribute] as number;
  let newValue: number;

  switch (operation) {
    case 'add':
      newValue = currentValue + value;
      break;
    case 'set':
      newValue = value;
      break;
    case 'multiply':
      newValue = currentValue * value;
      break;
    default:
      newValue = currentValue;
  }

  // è¾¹ç•Œæ£€æŸ¥
  if (attribute === 'hunger' || attribute === 'energy' || attribute === 'sanity') {
    newValue = Math.max(0, Math.min(100, newValue));
  }

  return {
    ...state,
    [attribute]: newValue
  };
}

function loadSaveData(saveData: GameSaveData): GameState {
  return {
    ...initialGameState,
    ...saveData.gameState,
    playerName: saveData.playerName,
    selectedProfession: saveData.profession,
    profession: saveData.profession,
    currentDay: saveData.currentDay,
    currentNode: saveData.currentNode,
    rulePapers: saveData.rulePapers,
    clearRules: saveData.clearRules,
    lastSaveTime: saveData.lastSaveTime,
    gameStatus: 'playing'
  };
}
```

#### 3.4 Contextå’ŒHookå®ç°
```typescript
// src/contexts/GameContext.tsx
import React, { createContext, useContext, useReducer, useEffect, ReactNode } from 'react';
import { GameState, GameAction } from '../types/gameState';
import { gameReducer, initialGameState } from '../utils/gameReducer';
import { useStorage } from '../hooks/useStorage';

interface GameContextType {
  state: GameState;
  dispatch: React.Dispatch<GameAction>;
  // ä¾¿æ·æ–¹æ³•
  setPlayerInfo: (name: string, profession: string, province: string) => void;
  advanceNode: (nodeId: string, day?: number) => void;
  makeChoice: (choiceId: string, choiceText: string) => void;
  saveGame: () => Promise<boolean>;
  loadGame: (playerName: string, day: number) => Promise<boolean>;
}

const GameContext = createContext<GameContextType | undefined>(undefined);

export const GameProvider: React.FC<{ children: ReactNode }> = ({ children }) => {
  const [state, dispatch] = useReducer(gameReducer, initialGameState);
  const { save, load } = useStorage();

  // ä¾¿æ·æ–¹æ³•
  const setPlayerInfo = (name: string, profession: string, province: string) => {
    dispatch({
      type: 'SET_PLAYER_INFO',
      payload: { name, profession, province }
    });
  };

  const advanceNode = (nodeId: string, day?: number) => {
    dispatch({
      type: 'ADVANCE_NODE',
      payload: {
        nodeId,
        day: day ?? state.currentDay
      }
    });
  };

  const makeChoice = (choiceId: string, choiceText: string) => {
    const choiceRecord = {
      id: choiceId,
      day: state.currentDay,
      node: state.currentNode,
      choiceText,
      timestamp: Date.now(),
      effects: [] // è¿™é‡Œéœ€è¦æ ¹æ®å…·ä½“é€‰æ‹©è®¡ç®—æ•ˆæœ
    };

    dispatch({ type: 'RECORD_CHOICE', payload: choiceRecord });
  };

  const saveGame = async (): Promise<boolean> => {
    try {
      dispatch({ type: 'SET_LOADING', payload: true });
      
      const saveData = {
        version: '1.0.0',
        playerName: state.playerName,
        profession: state.selectedProfession,
        gameState: state,
        rulePapers: state.rulePapers || [],
        clearRules: state.clearRules || [],
        currentDay: state.currentDay,
        currentNode: state.currentNode,
        gameConfigPath: '',
        lastSaveTime: Date.now(),
        createdTime: Date.now(),
        saveCount: 0
      };

      const success = await save(saveData);
      
      if (success) {
        dispatch({ type: 'SET_LAST_SAVE_TIME', payload: Date.now() });
      }

      return success;
    } catch (error) {
      console.error('Save game failed:', error);
      return false;
    } finally {
      dispatch({ type: 'SET_LOADING', payload: false });
    }
  };

  const loadGame = async (playerName: string, day: number): Promise<boolean> => {
    try {
      dispatch({ type: 'SET_LOADING', payload: true });
      
      const saveData = await load(playerName, day);
      
      if (saveData) {
        dispatch({ type: 'LOAD_SAVE', payload: saveData });
        return true;
      }
      
      return false;
    } catch (error) {
      console.error('Load game failed:', error);
      return false;
    } finally {
      dispatch({ type: 'SET_LOADING', payload: false });
    }
  };

  const contextValue: GameContextType = {
    state,
    dispatch,
    setPlayerInfo,
    advanceNode,
    makeChoice,
    saveGame,
    loadGame
  };

  return (
    <GameContext.Provider value={contextValue}>
      {children}
    </GameContext.Provider>
  );
};

export const useGame = () => {
  const context = useContext(GameContext);
  if (context === undefined) {
    throw new Error('useGame must be used within a GameProvider');
  }
  return context;
};
```

#### 3.5 çŠ¶æ€é€‰æ‹©å™¨
```typescript
// src/utils/gameSelectors.ts
import { GameState } from '../types/gameState';

// åŸºç¡€é€‰æ‹©å™¨
export const selectPlayerName = (state: GameState) => state.playerName;
export const selectCurrentDay = (state: GameState) => state.currentDay;
export const selectCurrentNode = (state: GameState) => state.currentNode;
export const selectGameStatus = (state: GameState) => state.gameStatus;
export const selectProfession = (state: GameState) => state.selectedProfession;

// æ´¾ç”Ÿé€‰æ‹©å™¨
export const selectIsGameActive = (state: GameState) => 
  state.gameStatus === 'playing' || state.gameStatus === 'paused';

export const selectCanAdvanceDay = (state: GameState) => {
  const nextDay = state.currentDay + 1;
  return nextDay <= 7 && state.availableDays.has(nextDay);
};

export const selectCompletedDaysCount = (state: GameState) => 
  state.completedDays.size;

export const selectCurrentDayProgress = (state: GameState) => {
  const dayProgress = state.storyProgress.currentPath.filter(
    node => node.startsWith(`day${state.currentDay}_`)
  ).length;
  return dayProgress;
};

export const selectAttributeValue = (state: GameState, attribute: string) => {
  return state[attribute as keyof GameState] as number;
};

export const selectAttributesStatus = (state: GameState) => {
  const criticalAttributes = ['hunger', 'energy', 'sanity'];
  const status = {
    critical: [] as string[],
    warning: [] as string[],
    normal: [] as string[]
  };

  criticalAttributes.forEach(attr => {
    const value = state[attr as keyof GameState] as number;
    if (value <= 20) {
      status.critical.push(attr);
    } else if (value <= 40) {
      status.warning.push(attr);
    } else {
      status.normal.push(attr);
    }
  });

  return status;
};

export const selectChoiceHistoryForDay = (state: GameState, day: number) => 
  state.choiceHistory.filter(choice => choice.day === day);

export const selectLastChoice = (state: GameState) => 
  state.choiceHistory[state.choiceHistory.length - 1] || null;

export const selectStoryVariable = (state: GameState, key: string) => 
  state.storyProgress.storyVariables.get(key);

export const selectBranchFlag = (state: GameState, flag: string) => 
  state.storyProgress.branchFlags.get(flag) || false;

export const selectVisitedNodes = (state: GameState) => 
  Array.from(state.storyProgress.visitedNodes);

export const selectCompletedNodes = (state: GameState) => 
  Array.from(state.storyProgress.completedNodes);

export const selectCurrentPath = (state: GameState) => 
  state.storyProgress.currentPath;

export const selectIsNodeVisited = (state: GameState, nodeId: string) => 
  state.storyProgress.visitedNodes.has(nodeId);

export const selectIsNodeCompleted = (state: GameState, nodeId: string) => 
  state.storyProgress.completedNodes.has(nodeId);

export const selectGameSummary = (state: GameState) => ({
  playerName: state.playerName,
  profession: state.selectedProfession,
  currentDay: state.currentDay,
  gameStatus: state.gameStatus,
  totalChoices: state.choiceHistory.length,
  completedDays: state.completedDays.size,
  playTime: Date.now() - state.sessionStartTime,
  lastSaveTime: state.lastSaveTime
});

export const selectSaveSlots = (state: GameState) => {
  const slots = [];
  for (let day = 0; day <= 7; day++) {
    if (state.completedDays.has(day) || state.availableDays.has(day)) {
      slots.push({
        day,
        completed: state.completedDays.has(day),
        available: state.availableDays.has(day),
        current: state.currentDay === day
      });
    }
  }
  return slots;
};
```

### 4. å…³é”®æŠ€æœ¯ç‚¹
- **ä¸å¯å˜çŠ¶æ€æ›´æ–°**ï¼šä½¿ç”¨å±•å¼€è¿ç®—ç¬¦å’ŒSet/Mapç¡®ä¿çŠ¶æ€ä¸å¯å˜æ€§
- **ç±»å‹å®‰å…¨**ï¼šå®Œæ•´çš„TypeScriptç±»å‹å®šä¹‰ï¼Œé¿å…è¿è¡Œæ—¶é”™è¯¯
- **æ€§èƒ½ä¼˜åŒ–**ï¼šç»†ç²’åº¦çš„çŠ¶æ€é€‰æ‹©å™¨ï¼Œå‡å°‘ä¸å¿…è¦çš„é‡æ¸²æŸ“
- **æ¨¡å—åŒ–è®¾è®¡**ï¼šæ¸…æ™°çš„èŒè´£åˆ†ç¦»ï¼Œä¾¿äºæµ‹è¯•å’Œç»´æŠ¤
- **é”™è¯¯è¾¹ç•Œ**ï¼šå®Œå–„çš„é”™è¯¯å¤„ç†å’Œæ¢å¤æœºåˆ¶

### 5. ä¾èµ–é¡¹
- Epic1é¡¹ç›®åŸºç¡€æ¶æ„ï¼ˆReact 19 + TypeScriptï¼‰
- Epic2æœ¬åœ°å­˜å‚¨ç³»ç»Ÿï¼ˆçŠ¶æ€æŒä¹…åŒ–ï¼‰
- React Context APIï¼ˆçŠ¶æ€å…±äº«ï¼‰
- React Hooksï¼ˆçŠ¶æ€ç®¡ç†ï¼‰

## Milestone

**ç¬¬ä¸€é˜¶æ®µï¼ˆå·²å®Œæˆï¼‰**ï¼š
- âœ… çŠ¶æ€ç»“æ„è®¾è®¡ï¼ˆå®Œæ•´çš„GameStateç±»å‹å®šä¹‰ï¼‰
- âœ… Actionç±»å‹å®šä¹‰ï¼ˆæ¶µç›–æ‰€æœ‰æ¸¸æˆæ“ä½œï¼‰
- âœ… Reduceré€»è¾‘å®ç°ï¼ˆä¸å¯å˜çŠ¶æ€æ›´æ–°ï¼‰
- âœ… Contextå’ŒHookå°è£…ï¼ˆuseGameæ¥å£ï¼‰

**ç¬¬äºŒé˜¶æ®µï¼ˆå½“å‰è¿›è¡Œï¼‰**ï¼š
- ğŸ”„ çŠ¶æ€é€‰æ‹©å™¨å¼€å‘ï¼ˆ30åˆ†é’Ÿï¼‰
- ğŸ”„ é›†æˆæµ‹è¯•éªŒè¯ï¼ˆ30åˆ†é’Ÿï¼‰
- ğŸ”„ æ€§èƒ½ä¼˜åŒ–ï¼ˆ15åˆ†é’Ÿï¼‰

**ç¬¬ä¸‰é˜¶æ®µï¼ˆå¾…å®Œæˆï¼‰**ï¼š
- ğŸ“‹ å•å…ƒæµ‹è¯•å¼€å‘å’Œæ‰§è¡Œï¼ˆ45åˆ†é’Ÿï¼‰
- ğŸ“‹ è¾¹ç•Œæ¡ä»¶æµ‹è¯•ï¼ˆ15åˆ†é’Ÿï¼‰
- ğŸ“‹ æ–‡æ¡£å®Œå–„å’ŒçŠ¶æ€æ›´æ–°ï¼ˆ15åˆ†é’Ÿï¼‰

## æµ‹è¯•æ–¹æ¡ˆ

### åŠŸèƒ½ç‚¹æµ‹è¯•
- ç©å®¶ä¿¡æ¯è®¾ç½®å’Œè·å–ï¼ˆåç§°ã€èŒä¸šã€çœä»½ï¼‰
- èŠ‚ç‚¹æ¨è¿›å’ŒçŠ¶æ€æ›´æ–°ï¼ˆæ•…äº‹æµç¨‹æ§åˆ¶ï¼‰
- å¤©æ•°å®Œæˆå’Œè§£é”é€»è¾‘ï¼ˆçº¿æ€§è§£é”æœºåˆ¶ï¼‰
- å­˜æ¡£åŠ è½½å’ŒçŠ¶æ€æ¢å¤ï¼ˆæ•°æ®æŒä¹…åŒ–ï¼‰
- å±æ€§æ›´æ–°å’Œè¾¹ç•Œæ£€æŸ¥ï¼ˆæ•°å€¼èŒƒå›´éªŒè¯ï¼‰
- é€‰æ‹©è®°å½•å’Œå†å²ç®¡ç†ï¼ˆå†³ç­–è¿½è¸ªï¼‰

### å¼‚å¸¸æµ‹è¯•
- éæ³•çŠ¶æ€æ›´æ–°å¤„ç†ï¼ˆæ— æ•ˆActionç±»å‹ï¼‰
- å­˜å‚¨ç³»ç»Ÿå¼‚å¸¸å¤„ç†ï¼ˆä¿å­˜/åŠ è½½å¤±è´¥ï¼‰
- çŠ¶æ€è¾¹ç•Œæ¡ä»¶å¤„ç†ï¼ˆæ•°å€¼æº¢å‡ºï¼‰
- å†…å­˜æ³„æ¼æ£€æŸ¥ï¼ˆé•¿æœŸè¿è¡Œç¨³å®šæ€§ï¼‰
- å¹¶å‘çŠ¶æ€æ›´æ–°ï¼ˆç«æ€æ¡ä»¶å¤„ç†ï¼‰

### æ€§èƒ½éªŒè¯
- çŠ¶æ€æ›´æ–°å“åº”æ—¶é—´<50msï¼ˆæ€§èƒ½åŸºå‡†ï¼‰
- å¤§è§„æ¨¡çŠ¶æ€å˜æ›´æ€§èƒ½ï¼ˆå¤§æ•°æ®é‡å¤„ç†ï¼‰
- ä¸å¿…è¦é‡æ¸²æŸ“é¿å…éªŒè¯ï¼ˆReactä¼˜åŒ–ï¼‰
- å†…å­˜ä½¿ç”¨ä¼˜åŒ–ï¼ˆ<50MBå³°å€¼ï¼‰