🕹 规则怪谈游戏 - 需求说明文档
一、项目概述

一款 线性 7 天流程 的规则怪谈文字类游戏。玩家首次进入时需要输入名字并选择省份，随后依次通关第 0 天到第 7 天的关卡。游戏数据保存在本地，退出后可恢复进度。通关后展示中国地图，标记各省份的通关人数。

二、游戏流程
1. 首次进入

检测是否有存档。

若无存档：
① 输入名字（本地保存）。
② 播放背景故事：世界被诡异入侵，你被选为省份代表。
③ 弹出中国地图，点击省份 → 高亮并记录（本地保存）。
④ 进入 第 0 天。

2. 第 0 天（新手引导）

节点数：5~10 个。

仅用于熟悉操作。

无死亡分支，无复杂剧情。

结尾获得“规则清单”。

3. 第 1~7 天

线性解锁。必须完成上一天才能进入下一天。

每天通关后，展示 日历式进度 UI（纵向排列，已完成的天数高亮）。

4. 通关阶段

玩家完成第 7 天后：
① 调用后端接口（HTTP GET），获取各省份通关人数。
② 弹出中国地图，显示各省份的通关人数。
③ 地图配色规则：

通关人数最多：深绿色

通关人数最少：深红色

其他省份：位于两者之间的渐变色

5. 清除记忆

设置“清除记忆”按钮。

点击后弹出二次确认弹窗。

确认后清空所有数据：名字、省份、进度、存档。

清除后重新进入游戏（回到“输入名字”环节）。

允许使用与之前相同的名字和省份组合。

三、功能需求
1. 存储机制

存档位置：本地。

每做一步选择立即保存。

恢复机制：下次进入游戏时，从最近一次选择的节点继续。

存档内容包括：

玩家名字

选择的省份

当前游戏天数与节点

游戏配置文件路径

2. 配置文件

存档、故事脚本、图片资源均存放在本地。

故事脚本采用 Python 配置脚本（不写死在代码里）。

切换界面时：

若有配置图片 → 播放图片

若无配置图片 → 空白显示

3. 地图交互

选择省份：点击高亮并记录即可。

结算地图：展示通关人数并按颜色渐变显示。

4. 交互限制

无跳过选项。

无返回选项。

有退出选项（直接关闭程序）。

5. 错误处理

错误日志写入本地文件（.log）。

四、非功能需求

运行环境

后续封装为 exe，不允许多标签页。

过渡效果

界面切换统一采用 淡入淡出效果。

性能

存档与界面切换需即时，无明显延迟。

稳定性

退出时不需要额外保存，因为所有选择已实时存档。

五、关键点总结

第 0 天：新手引导，无死亡分支。

1~7 天：线性解锁，通关后用日历 UI 展示进度。

地图交互：首次选择绑定省份，通关后展示通关人数。

存档：每一步选择自动保存，可恢复到最近节点。

清除记忆：二次确认，清空存档，重新开始。

配置文件：脚本与图片均本地加载，支持灵活替换。

UI 风格：日历式阶段展示 + 中国地图（渐变色统计）。

过渡效果：统一淡入淡出。

日志：错误写入本地 .log 文件。

故事写在python脚本里,这次工作不涉及具体的游戏故事,因此PRD里不需要涉及游戏的具体故事,当前PRD的设计里只需要可以点击日历,读取python脚本0~7,解析python脚本0~7,识别通关条件达成和死亡条件达成,在选择分支的时候做到存储游戏进度和重启游戏之后恢复游戏进度